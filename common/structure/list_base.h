//
// Created by xiaoxianghui on 2025/4/9.
//

#ifndef TEST_C_LIST_BASE_H
#define TEST_C_LIST_BASE_H

//ä»¥ä¸‹æ˜¯ `std::list` å„å‡½æ•°çš„åˆ†ç±»åŠç®€è¦è¯´æ˜ï¼š
//
//---
//
//### **1. æ„é€ /ææ„**
//- **`list()`**ï¼šåˆ›å»ºç©ºé“¾è¡¨ã€‚
//- **`list(size_type count, const T& value)`**ï¼šåˆ›å»ºå« `count` ä¸ª `value` çš„é“¾è¡¨ã€‚
//- **`explicit list(size_type count)`**ï¼šåˆ›å»ºå« `count` ä¸ªé»˜è®¤åˆå§‹åŒ–å…ƒç´ çš„é“¾è¡¨ã€‚
//- **`list(const list& other)`**ï¼šæ‹·è´æ„é€ é“¾è¡¨ã€‚
//- **`list(list&& other)`**ï¼šç§»åŠ¨æ„é€ é“¾è¡¨ï¼ˆC++11ï¼‰ã€‚
//- **`list(initializer_list<T> init)`**ï¼šç”¨åˆå§‹åŒ–åˆ—è¡¨æ„é€ é“¾è¡¨ï¼ˆC++11ï¼‰ã€‚
//- **`~list()`**ï¼šææ„å‡½æ•°ï¼Œé‡Šæ”¾é“¾è¡¨å†…å­˜ã€‚
//
//---
//
//### **2. å…ƒç´ è®¿é—®**
//- **`front()`** â†’ `T&`ï¼šè¿”å›é¦–å…ƒç´ çš„å¼•ç”¨ï¼ˆç©ºé“¾è¡¨æ—¶æœªå®šä¹‰ï¼‰ã€‚
//- **`back()`** â†’ `T&`ï¼šè¿”å›å°¾å…ƒç´ çš„å¼•ç”¨ï¼ˆç©ºé“¾è¡¨æ—¶æœªå®šä¹‰ï¼‰ã€‚
//
//---
//
//### **3. è¿­ä»£å™¨**
//- **`begin()/end()`** â†’ åŒå‘è¿­ä»£å™¨ï¼šæŒ‡å‘é¦–å…ƒç´ å’Œå°¾åä½ç½®ã€‚
//- **`cbegin()/cend()`** â†’ å¸¸é‡è¿­ä»£å™¨ï¼ˆC++11ï¼‰ã€‚
//- **`rbegin()/rend()`** â†’ åå‘è¿­ä»£å™¨ï¼šä»å°¾åˆ°å¤´éå†ã€‚
//- **`crbegin()/crend()`** â†’ å¸¸é‡åå‘è¿­ä»£å™¨ï¼ˆC++11ï¼‰ã€‚
//
//---
//
//### **4. å®¹é‡**
//- **`empty()`** â†’ `bool`ï¼šåˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©ºï¼ˆO(1)ï¼‰ã€‚
//- **`size()`** â†’ `size_type`ï¼šè¿”å›å…ƒç´ æ•°é‡ï¼ˆO(n) C++11 å‰ï¼Œå¯èƒ½ O(1) åï¼‰ã€‚
//- **`max_size()`** â†’ `size_type`ï¼šè¿”å›å¯å®¹çº³çš„æœ€å¤§å…ƒç´ æ•°ã€‚
//
//---
//
//### **5. ä¿®æ”¹å™¨**
//- **`clear()`**ï¼šåˆ é™¤æ‰€æœ‰å…ƒç´ ï¼ˆO(n)ï¼‰ã€‚
//- **`insert(iterator pos, const T& value)`** â†’ è¿­ä»£å™¨ï¼šåœ¨ `pos` å‰æ’å…¥å…ƒç´ ã€‚
//- **`emplace(iterator pos, Args&&... args)`** â†’ è¿­ä»£å™¨ï¼šåŸä½æ„é€ æ’å…¥å…ƒç´ ï¼ˆC++11ï¼‰ã€‚
//- **`erase(iterator pos)`** â†’ è¿­ä»£å™¨ï¼šåˆ é™¤ `pos` å¤„å…ƒç´ ã€‚
//- **`push_back(const T& value)`**ï¼šå°¾éƒ¨æ’å…¥å…ƒç´ ï¼ˆO(1)ï¼‰ã€‚
//- **`push_front(const T& value)`**ï¼šå¤´éƒ¨æ’å…¥å…ƒç´ ï¼ˆO(1)ï¼‰ã€‚
//- **`pop_back()`**ï¼šåˆ é™¤å°¾éƒ¨å…ƒç´ ï¼ˆç©ºé“¾è¡¨æ—¶æœªå®šä¹‰ï¼‰ã€‚
//- **`pop_front()`**ï¼šåˆ é™¤å¤´éƒ¨å…ƒç´ ï¼ˆç©ºé“¾è¡¨æ—¶æœªå®šä¹‰ï¼‰ã€‚
//- **`emplace_back(Args&&... args)`**ï¼šå°¾éƒ¨åŸä½æ„é€ å…ƒç´ ï¼ˆC++11ï¼‰ã€‚
//- **`emplace_front(Args&&... args)`**ï¼šå¤´éƒ¨åŸä½æ„é€ å…ƒç´ ï¼ˆC++11ï¼‰ã€‚
//- **`resize(size_type count)`**ï¼šè°ƒæ•´é“¾è¡¨å¤§å°ä¸º `count`ï¼Œæ–°å¢å…ƒç´ é»˜è®¤åˆå§‹åŒ–ã€‚
//- **`swap(list& other)`**ï¼šäº¤æ¢ä¸¤ä¸ªé“¾è¡¨å†…å®¹ï¼ˆO(1)ï¼‰ã€‚
//
//---
//
//### **6. é“¾è¡¨ç‰¹æœ‰æ“ä½œ**
//- **`splice(iterator pos, list& other)`**ï¼šå°† `other` æ‰€æœ‰å…ƒç´ ç§»åŠ¨åˆ°å½“å‰é“¾è¡¨ `pos` å‰ï¼ˆO(1)ï¼‰ã€‚
//- **`merge(list& other)`**ï¼šåˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ï¼ˆ`other` ä¼šè¢«æ¸…ç©ºï¼‰ã€‚
//- **`remove(const T& value)`**ï¼šåˆ é™¤æ‰€æœ‰ç­‰äº `value` çš„å…ƒç´ ï¼ˆO(n)ï¼‰ã€‚
//- **`remove_if(Predicate pred)`**ï¼šåˆ é™¤æ»¡è¶³æ¡ä»¶ `pred` çš„å…ƒç´ ï¼ˆO(n)ï¼‰ã€‚
//- **`reverse()`**ï¼šåè½¬é“¾è¡¨å…ƒç´ é¡ºåºï¼ˆO(n)ï¼‰ã€‚
//- **`sort()`**ï¼šé»˜è®¤å‡åºæ’åºï¼ˆæ—¶é—´å¤æ‚åº¦ O(n log n)ï¼‰ã€‚
//- **`unique()`**ï¼šåˆ é™¤è¿ç»­é‡å¤å…ƒç´ ï¼ˆé€šå¸¸ä¸ `sort` é…åˆå»é‡ï¼‰ã€‚
//
//---
//
//ğŸ“Œ **å…³é”®ç‰¹æ€§**ï¼š
//æ‰€æœ‰æ’å…¥/åˆ é™¤æ“ä½œï¼ˆå¦‚ `push_back`ã€`splice`ï¼‰çš„æ—¶é—´å¤æ‚åº¦ä¸º **O(1)**ï¼Œä½† `size()` åœ¨ C++11 å‰å¯èƒ½ä¸º O(n)ã€‚

#include "stddef.h"
#include "oop.h"

/**
 * å®ç°ç±»å‹æ“¦é™¤çš„å…±ç”¨list
 * ç‰¹å®šç±»å‹listå®šä¹‰å®
 * é€šè¿‡å‡½æ•°æŒ‡é’ˆç‰¹åŒ–ç±»å‹
 */

#define className _listBase
#define classBaseName

typedef int _listBaseVal;

#define _listBaseNode(type) \
struct oopName(node ## _ ## type)

#define _listBaseNodeDefine(type) \
struct oopName(node ## _ ## type) { \
    struct oopName(node) *_priv, *_next; \
    type _storage; \
}

// å®å®ç°æ³›å‹æ— æ³•å¯¹æŒ‡é’ˆå³ `_listBaseNodeDefine(size_t *);` åšæ”¯æŒ
// åªèƒ½é€šè¿‡ `typedef` è§„é¿
_listBaseNodeDefine(_listBaseVal);
_listBaseNodeDefine(size_t);

oopClassDef
            _listBaseNode(size_t) _impl;
oopClassDefEnd

#endif //TEST_C_LIST_BASE_H
