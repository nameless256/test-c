
* ## 编码及代码优化参考规范

### <center>命名规范</center>

* 变量依据作用域添加前缀`s`(仅当前源文件使用)、`g`(全局使用)，非必要应尽量避免全局变量

* 对外开放的函数接口、变量以及宏定义等命名为公共命名

* 公共命名应考虑加上功能模块名的缩写（在不影响意思表达的情况下）充当前缀

* 公共命名顺序如下：`g`(变量可选)、父模块(可选)、当前模块、`New, Get, Set, Is`(函数可选)、实际命名

* 利用上下文简化命名，命名要可读、可搜索、应清晰、无疑义，不要有过多含义类似的命名，尽量避免魔法数字，用宏来命名常量

* 目录/文件`snake_case`

* 类/类型/变量/函数/宏函数`camelCase`

* 枚举`enumTypeName_EnumName`

* 宏定义常量`UPPER_SNAKE`

* 公共/保护方法`className_funcName`

***

### <center>编程及优化原则</center>

* 一行代码最大长度应为半屏，命名过长时`（一行代码最大长度的三分之一）`应考虑缩写 或者 在适当的地方换行

* 函数形参不宜过多，没有形参括号内应该填`void`，代码行数应尽量控制在屏幕以内

* 嵌套层级应在不影响阅读的前提下控制在5层以内，活用卫语句可以有效减少嵌套层级

* 函数设计应功能单一，复用率高，过于臃肿时应考虑抽象

* 避免过度封装代码导致代码臃肿，如果封装后代码可读性降低过多应考虑注释或不做封装

* 优化时应注意不要引出其他问题，用到的变量及函数应谨慎处理，不应擅自删除

* 注意判断、传参的隐性转换及编程中的未定义行为，尽量规避并控制意料之外的结果

* 在函数运行有错误时，要么要有错误码作为返回值，要么直接处理错误。没返回值时不处理错误而直接返回是不妥当的

* 在多平台共用的代码资源应考虑可能出现的兼容性问题，如在瑞昱上没有而杰理上有的除数为零的问题

* 引用开源代码可考虑加多一层封装以便使用

* 尽量模块化编程，避免全局变量、嵌套包含及包含混乱，如有可能最好另写一份文档说明包含树

* 非模块相关的业务逻辑请放到合适的地方

* 当觉得代码过于复杂时，可能是没有找到更优雅的解决办法

* 当编程没有思路时，不妨把想法写在注释里，方便缕清思路

***

### <center>项目开发注意点</center>

* 开发时谨记奥卡姆剃刀；`简约原则`：重复代码要封装，应该选择最简单的那个；如无必要，`勿增实体`：没有必要就不要加标志或对象

* 尤其是标志，问题修复应尽量`避免新增标志`，避免因此导致`flag`满天飞

* 协议订立需要描述清晰，不要带有误导性

* 代码移植时应注意功能模块的整体迁移，尤为需要注意的是作用域为全局的变量、宏、函数以及声明的外部变量

* 待办事项 <font color=bbff00>_**\todo**_</font> 需要在版本发布前过一遍

***

### <center>代码风格</center>

* 以方便代码阅读及无疑义性为主，风格尽量统一，尽量按`Doxygen`规范注释，可读性高的代码可不加注释
